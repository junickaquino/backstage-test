{"version":3,"file":"createExtensionDataRef.esm.js","sources":["../../src/wiring/createExtensionDataRef.ts"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @public */\nexport type ExtensionDataRef<\n  TData,\n  TConfig extends { optional?: true } = {},\n> = {\n  id: string;\n  T: TData;\n  config: TConfig;\n  $$type: '@backstage/ExtensionDataRef';\n};\n\n/** @public */\nexport interface ConfigurableExtensionDataRef<\n  TData,\n  TConfig extends { optional?: true } = {},\n> extends ExtensionDataRef<TData, TConfig> {\n  optional(): ConfigurableExtensionDataRef<TData, TData & { optional: true }>;\n}\n\n// TODO: change to options object with ID.\n/** @public */\nexport function createExtensionDataRef<TData>(\n  id: string,\n): ConfigurableExtensionDataRef<TData> {\n  return {\n    id,\n    $$type: '@backstage/ExtensionDataRef',\n    config: {},\n    optional() {\n      return {\n        ...this,\n        config: { ...this.config, optional: true },\n      };\n    },\n    toString() {\n      const optional = Boolean(this.config.optional);\n      return `ExtensionDataRef{id=${id},optional=${optional}}`;\n    },\n  } as ConfigurableExtensionDataRef<TData, { optional?: true }>;\n}\n"],"names":[],"mappings":"AAqCO,SAAS,uBACd,EACqC,EAAA;AACrC,EAAO,OAAA;AAAA,IACL,EAAA;AAAA,IACA,MAAQ,EAAA,6BAAA;AAAA,IACR,QAAQ,EAAC;AAAA,IACT,QAAW,GAAA;AACT,MAAO,OAAA;AAAA,QACL,GAAG,IAAA;AAAA,QACH,QAAQ,EAAE,GAAG,IAAK,CAAA,MAAA,EAAQ,UAAU,IAAK,EAAA;AAAA,OAC3C,CAAA;AAAA,KACF;AAAA,IACA,QAAW,GAAA;AACT,MAAA,MAAM,QAAW,GAAA,OAAA,CAAQ,IAAK,CAAA,MAAA,CAAO,QAAQ,CAAA,CAAA;AAC7C,MAAO,OAAA,CAAA,oBAAA,EAAuB,EAAE,CAAA,UAAA,EAAa,QAAQ,CAAA,CAAA,CAAA,CAAA;AAAA,KACvD;AAAA,GACF,CAAA;AACF;;;;"}