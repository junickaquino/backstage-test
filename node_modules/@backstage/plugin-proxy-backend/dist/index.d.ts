import { Config } from '@backstage/config';
import express from 'express';
import { Logger } from 'winston';
import { PluginEndpointDiscovery } from '@backstage/backend-common';

/** @public */
interface RouterOptions {
    logger: Logger;
    config: Config;
    discovery: PluginEndpointDiscovery;
    skipInvalidProxies?: boolean;
    reviveConsumedRequestBodies?: boolean;
}
/**
 * Creates a new
 * {@link https://expressjs.com/en/api.html#router | "express router"} that
 * proxies each target configured under the `proxy.endpoints` key of the config.
 *
 * @remarks
 *
 * Example configuration:
 *
 * ```yaml
 * proxy:
 *   endpoints:
 *      # Option 1: Simple URL String
 *     simple-example: http://simple.example.com:8080
 *     # Option 2: `http-proxy-middleware` compatible object
 *     '/larger-example/v1':
 *       target: http://larger.example.com:8080/svc.v1
 *       headers:
 *         Authorization: Bearer ${EXAMPLE_AUTH_TOKEN}
 * ```
 *
 * @see https://backstage.io/docs/plugins/proxying
 * @public
 */
declare function createRouter(options: RouterOptions): Promise<express.Router>;

export { type RouterOptions, createRouter };
